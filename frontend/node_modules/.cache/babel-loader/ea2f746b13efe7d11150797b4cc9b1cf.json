{"ast":null,"code":"var _jsxFileName = \"/home/wanning/hackathon-project/frontend/src/components/SignUpContainer.jsx\";\nimport React, { Component } from \"react\";\nimport SignUpForm from \"./SignUpForm.jsx\";\n\nconst axios = require(\"axios\");\n\nconst FormValidators = require(\"./validate\");\n\nconst validateSignUpForm = FormValidators.validateSignUpForm;\n\nconst zxcvbn = require(\"zxcvbn\");\n\nclass SignUpContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errors: {},\n      user: {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        pwconfirm: \"\"\n      },\n      btnTxt: \"show\",\n      type: \"password\",\n      score: \"0\"\n    };\n    this.pwMask = this.pwMask.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.submitSignup = this.submitSignup.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.pwHandleChange = this.pwHandleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n    this.setState({\n      user\n    });\n  }\n\n  pwHandleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n    this.setState({\n      user\n    });\n\n    if (event.target.value === \"\") {\n      this.setState(state => Object.assign({}, state, {\n        score: \"null\"\n      }));\n    } else {\n      var pw = zxcvbn(event.target.value);\n      this.setState(state => Object.assign({}, state, {\n        score: pw.score + 1\n      }));\n    }\n  }\n\n  submitSignup(user) {\n    var params = {\n      username: user.usr,\n      password: user.pw,\n      email: user.email\n    };\n    axios.post(\"https://ouramazingserver.com/api/signup/submit\", params).then(res => {\n      if (res.data.success === true) {\n        localStorage.token = res.data.token;\n        localStorage.isAuthenticated = true;\n        window.location.reload();\n      } else {\n        this.setState({\n          errors: {\n            message: res.data.message\n          }\n        });\n      }\n    }).catch(err => {\n      console.log(\"Sign up data submit error: \", err);\n    });\n  }\n\n  validateForm(event) {\n    event.preventDefault();\n    var payload = validateSignUpForm(this.state.user);\n\n    if (payload.success) {\n      this.setState({\n        errors: {}\n      });\n      var user = {\n        usr: this.state.user.username,\n        pw: this.state.user.password,\n        email: this.state.user.email\n      };\n      this.submitSignup(user);\n    } else {\n      const errors = payload.errors;\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  pwMask(event) {\n    event.preventDefault();\n    this.setState(state => Object.assign({}, state, {\n      type: this.state.type === \"password\" ? \"input\" : \"password\",\n      btnTxt: this.state.btnTxt === \"show\" ? \"hide\" : \"show\"\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SignUpForm, {\n      onSubmit: this.validateForm,\n      onChange: this.handleChange,\n      onPwChange: this.pwHandleChange,\n      errors: this.state.errors,\n      user: this.state.user,\n      score: this.state.score,\n      btnTxt: this.state.btnTxt,\n      type: this.state.type,\n      pwMask: this.pwMask,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default SignUpContainer;","map":{"version":3,"names":["React","Component","SignUpForm","axios","require","FormValidators","validateSignUpForm","zxcvbn","SignUpContainer","constructor","props","state","errors","user","username","email","password","pwconfirm","btnTxt","type","score","pwMask","bind","handleChange","submitSignup","validateForm","pwHandleChange","event","field","target","name","value","setState","Object","assign","pw","params","usr","post","then","res","data","success","localStorage","token","isAuthenticated","window","location","reload","message","catch","err","console","log","preventDefault","payload","render"],"sources":["/home/wanning/hackathon-project/frontend/src/components/SignUpContainer.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport SignUpForm from \"./SignUpForm.jsx\";\nconst axios = require(\"axios\");\nconst FormValidators = require(\"./validate\");\nconst validateSignUpForm = FormValidators.validateSignUpForm;\nconst zxcvbn = require(\"zxcvbn\");\n\nclass SignUpContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      errors: {},\n      user: {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        pwconfirm: \"\"\n      },\n      btnTxt: \"show\",\n      type: \"password\",\n      score: \"0\"\n    };\n\n    this.pwMask = this.pwMask.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.submitSignup = this.submitSignup.bind(this);\n    this.validateForm = this.validateForm.bind(this);\n    this.pwHandleChange = this.pwHandleChange.bind(this);\n  }\n\n  handleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n\n    this.setState({\n      user\n    });\n  }\n\n  pwHandleChange(event) {\n    const field = event.target.name;\n    const user = this.state.user;\n    user[field] = event.target.value;\n\n    this.setState({\n      user\n    });\n\n    if (event.target.value === \"\") {\n      this.setState(state =>\n        Object.assign({}, state, {\n          score: \"null\"\n        })\n      );\n    } else {\n      var pw = zxcvbn(event.target.value);\n      this.setState(state =>\n        Object.assign({}, state, {\n          score: pw.score + 1\n        })\n      );\n    }\n  }\n\n  submitSignup(user) {\n    var params = { username: user.usr, password: user.pw, email: user.email };\n    axios\n      .post(\"https://ouramazingserver.com/api/signup/submit\", params)\n      .then(res => {\n        if (res.data.success === true) {\n          localStorage.token = res.data.token;\n          localStorage.isAuthenticated = true;\n          window.location.reload();\n        } else {\n          this.setState({\n            errors: { message: res.data.message }\n          });\n        }\n      })\n      .catch(err => {\n        console.log(\"Sign up data submit error: \", err);\n      });\n  }\n\n  validateForm(event) {\n    event.preventDefault();\n    var payload = validateSignUpForm(this.state.user);\n    if (payload.success) {\n      this.setState({\n        errors: {}\n      });\n      var user = {\n        usr: this.state.user.username,\n        pw: this.state.user.password,\n        email: this.state.user.email\n      };\n      this.submitSignup(user);\n    } else {\n      const errors = payload.errors;\n      this.setState({\n        errors\n      });\n    }\n  }\n\n  pwMask(event) {\n    event.preventDefault();\n    this.setState(state =>\n      Object.assign({}, state, {\n        type: this.state.type === \"password\" ? \"input\" : \"password\",\n        btnTxt: this.state.btnTxt === \"show\" ? \"hide\" : \"show\"\n      })\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <SignUpForm\n          onSubmit={this.validateForm}\n          onChange={this.handleChange}\n          onPwChange={this.pwHandleChange}\n          errors={this.state.errors}\n          user={this.state.user}\n          score={this.state.score}\n          btnTxt={this.state.btnTxt}\n          type={this.state.type}\n          pwMask={this.pwMask}\n        />\n      </div>\n    );\n  }\n}\n\nexport default SignUpContainer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}